(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{9382:(e,r,a)=>{Promise.resolve().then(a.bind(a,527))},8725:(e,r,a)=>{"use strict";a.d(r,{_:()=>n,u:()=>l});var t=a(5155),o=a(2115),s=a(5838);let c=(0,o.createContext)(),l=()=>{let e=(0,o.useContext)(c);if(!e)throw Error("useCarrito debe ser usado dentro de un CarritoProvider");return e},n=e=>{let{children:r}=e,[a,l]=(0,o.useState)([]),[n,i]=(0,o.useState)(!1),[d,m]=(0,o.useState)(null),[u,p]=(0,o.useState)(0),[x,h]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("carritoId"),r=localStorage.getItem("carritoItems");if(e){if(h(parseInt(e)),r)try{let e=JSON.parse(r);l(e);let a=e.reduce((e,r)=>e+(r.total||0),0);p(a)}catch(e){console.error("Error al parsear items del localStorage:",e),l([]),p(0)}else try{await g(parseInt(e))}catch(e){console.error("Error al cargar items del servidor:",e),l([]),p(0)}}else{let e=Date.now();h(e),localStorage.setItem("carritoId",e.toString()),l([]),p(0)}}catch(r){console.error("Error al inicializar el carrito:",r);let e=Date.now();h(e),localStorage.setItem("carritoId",e.toString()),l([]),p(0)}})()},[]);let g=async e=>{if(e)try{i(!0);try{var r,a;let t=await s.Ay.get("/detalles/carrito/".concat(e));l(t.data||[]);try{let a=await s.Ay.get("/detalles/carrito/".concat(e,"/total"));p((null===(r=a.data)||void 0===r?void 0:r.total)||0)}catch(r){console.error("Error al obtener el total del carrito:",r);let e=(null===(a=t.data)||void 0===a?void 0:a.reduce((e,r)=>e+(r.total||0),0))||0;p(e)}m(null)}catch(r){console.error("Error al cargar items del carrito:",r);let e=localStorage.getItem("carritoItems");if(e)try{let r=JSON.parse(e);l(r);let a=r.reduce((e,r)=>e+(r.total||0),0);p(a)}catch(e){console.error("Error al parsear items del localStorage:",e),l([]),p(0)}else l([]),p(0);m("No se pudieron cargar los productos del carrito")}}finally{i(!1)}},f=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{i(!0);let t=a.find(r=>r.id_producto===e.id_producto);if(t){let e=t.cantidad+r;await y(t.id_detalle_carrito,e);return}let o={id_detalle_carrito:Date.now(),id_carrito:x,id_producto:e.id_producto,cantidad:r,precio_unitario:e.precio_oferta||e.precio,total:(e.precio_oferta||e.precio)*r,nombre:e.nombre,imagen:e.imagen,marca_nombre:e.marca_nombre||e.marca},s=[...a,o];l(s);let c=u+o.total;return p(c),localStorage.setItem("carritoItems",JSON.stringify(s)),o}catch(e){throw console.error("Error al agregar producto al carrito:",e),m("No se pudo agregar el producto al carrito"),e}finally{i(!1)}},y=async(e,r)=>{if(x)try{i(!0);let a=await s.Ay.put("/detalles/".concat(e),{cantidad:r});return await g(x),a.data}catch(e){var a,t;throw console.error("Error al actualizar cantidad del producto:",e),m((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.error)||"No se pudo actualizar la cantidad del producto"),e}finally{i(!1)}},b=async e=>{if(x)try{i(!0);let r=await s.Ay.delete("/detalles/".concat(e));return await g(x),r.data}catch(e){throw console.error("Error al eliminar producto del carrito:",e),m("No se pudo eliminar el producto del carrito"),e}finally{i(!1)}},j=async()=>{if(x)try{i(!0);let e=await s.Ay.delete("/detalles/carrito/".concat(x));return l([]),p(0),e.data}catch(e){throw console.error("Error al vaciar el carrito:",e),m("No se pudo vaciar el carrito"),e}finally{i(!1)}},v=a.reduce((e,r)=>e+r.cantidad,0);return(0,t.jsx)(c.Provider,{value:{items:a,loading:n,error:d,total:u,cantidadTotal:v,carritoId:x,agregarProducto:f,actualizarCantidad:y,eliminarProducto:b,vaciarCarrito:j,cargarItemsCarrito:g},children:r})}},5838:(e,r,a)=>{"use strict";a.d(r,{Ay:()=>n,Ts:()=>l,rF:()=>c});var t=a(2651);let o=a(2818).env.REACT_APP_API_URL||"http://localhost:5000/api",s=t.A.create({baseURL:o,headers:{"Content-Type":"application/json"}}),c={getAll:async()=>{try{return(await s.get("/marcas")).data}catch(e){throw console.error("Error al obtener marcas:",e),e}},getById:async e=>{try{return(await s.get("/marcas/".concat(e))).data}catch(r){throw console.error("Error al obtener marca ".concat(e,":"),r),r}},create:async e=>{try{let r=new FormData;return Object.keys(e).forEach(a=>{"logo"===a&&e[a]instanceof File?r.append(a,e[a]):null!==e[a]&&void 0!==e[a]&&r.append(a,e[a])}),(await t.A.post("".concat(o,"/marcas"),r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw console.error("Error al crear marca:",e),e}},update:async(e,r)=>{try{let a=new FormData;return Object.keys(r).forEach(e=>{"logo"===e&&r[e]instanceof File?a.append(e,r[e]):null!==r[e]&&void 0!==r[e]&&a.append(e,r[e])}),console.log("Enviando datos de marca:",Object.fromEntries(a)),(await t.A.put("".concat(o,"/marcas/").concat(e),a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error al actualizar marca ".concat(e,":"),r),r.response&&console.error("Respuesta del servidor:",r.response.data),r}},delete:async e=>{try{return(await s.delete("/marcas/".concat(e))).data}catch(r){throw console.error("Error al eliminar marca ".concat(e,":"),r),r}}},l={getAll:async()=>{try{return(await s.get("/productos?includeDetails=true")).data}catch(e){throw console.error("Error al obtener productos:",e),e}},getById:async e=>{try{return(await s.get("/productos/".concat(e))).data}catch(r){throw console.error("Error al obtener producto ".concat(e,":"),r),r}},getByMarca:async e=>{try{return(await s.get("/productos/marca/".concat(e))).data}catch(r){throw console.error("Error al obtener productos de marca ".concat(e,":"),r),r}},create:async e=>{try{let r=new FormData;return Object.keys(e).forEach(a=>{"imagen"===a&&e[a]instanceof File?r.append(a,e[a]):null!==e[a]&&void 0!==e[a]&&r.append(a,e[a])}),(await t.A.post("".concat(o,"/productos"),r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw console.error("Error al crear producto:",e),e}},update:async(e,r)=>{try{let a=new FormData;return Object.keys(r).forEach(e=>{"imagen"===e&&r[e]instanceof File?a.append(e,r[e]):null!==r[e]&&void 0!==r[e]&&a.append(e,r[e])}),(await t.A.put("".concat(o,"/productos/").concat(e),a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error al actualizar producto ".concat(e,":"),r),r}},delete:async e=>{try{return(await s.delete("/productos/".concat(e))).data}catch(r){throw console.error("Error al eliminar producto ".concat(e,":"),r),r}}},n=s},527:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>u});var t=a(5155),o=a(2115),s=a(8173),c=a.n(s);a(5565);var l=a(9076),n=a(8725),i=a(2818);let d=e=>{let{product:r}=e,[a,s]=(0,o.useState)(!1),[d,m]=(0,o.useState)(!1),[u,p]=(0,o.useState)(!1),{agregarProducto:x}=(0,n.u)();if(!r)return null;let h=r.precio_oferta&&r.precio_oferta<r.precio,g=h?Math.round((r.precio-r.precio_oferta)/r.precio*100):0,f=i.env.REACT_APP_API_URL||"http://localhost:5000",y=e=>"number"!=typeof e?"0.00":e.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}),b=async e=>{if(e.preventDefault(),e.stopPropagation(),!d&&!u)try{m(!0),await x(r,1),p(!0),setTimeout(()=>{p(!1)},2e3)}catch(e){console.error("Error al agregar al carrito:",e)}finally{m(!1)}};return(0,t.jsxs)("div",{className:"group relative bg-gray-900 border border-gray-800 hover:border-red-500/50 rounded-xl overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-red-500/10",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[h&&(0,t.jsxs)("div",{className:"absolute top-3 left-3 z-10 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:["-",g,"%"]}),(0,t.jsxs)("div",{className:"relative h-56 w-full bg-gray-800 overflow-hidden",children:[(0,t.jsx)(c(),{href:"/producto/".concat(r.id_producto),children:(0,t.jsx)("div",{className:"w-full h-full transform transition-transform duration-500 group-hover:scale-105",children:r.imagen?(0,t.jsx)("div",{className:"w-full h-full",children:(0,t.jsx)("img",{src:"".concat(f).concat(r.imagen),alt:r.nombre,className:"w-full h-full object-contain p-4"})}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-600",children:"Sin imagen"})})}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 backdrop-blur-sm py-3 px-4 transform transition-transform duration-300 ".concat(a?"translate-y-0":"translate-y-full"),children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("button",{onClick:b,disabled:d||u,className:"text-white text-sm px-3 py-1.5 rounded-lg flex items-center gap-1.5 transition-colors ".concat(u?"bg-green-500":"bg-red-500 hover:bg-red-600"),children:d?(0,t.jsx)("span",{className:"animate-spin h-4 w-4 border-t-2 border-white rounded-full"}):u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.CMH,{size:14}),(0,t.jsx)("span",{children:"A\xf1adido"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.AsH,{size:14}),(0,t.jsx)("span",{children:"A\xf1adir Al Carrito"})]})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{className:"bg-gray-800 hover:bg-gray-700 text-white p-1.5 rounded-lg transition-colors",children:(0,t.jsx)(l.Mbv,{size:16})}),(0,t.jsx)("button",{className:"bg-gray-800 hover:bg-gray-700 text-white p-1.5 rounded-lg transition-colors",children:(0,t.jsx)(l.Ny1,{size:16})})]})]})})]}),(0,t.jsxs)("div",{className:"p-4 space-y-2",children:[(0,t.jsx)(c(),{href:"/producto/".concat(r.id_producto),children:(0,t.jsx)("h3",{className:"font-semibold text-white hover:text-red-500 transition-colors line-clamp-2 min-h-[2.5rem]",children:r.nombre})}),r.descripcion&&(0,t.jsx)("p",{className:"text-sm text-gray-400 line-clamp-2",children:r.descripcion}),(0,t.jsx)("div",{className:"flex justify-between items-end pt-2",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsxs)("span",{className:"text-lg font-bold text-white",children:["$",y(h?r.precio_oferta:r.precio)]}),h&&(0,t.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",y(r.precio)]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-green-500 text-xs",children:[(0,t.jsx)(l.lHQ,{}),(0,t.jsx)("span",{children:r.cantidad>0?"".concat(r.cantidad," en stock"):"Agotado"})]})]})})]})]})};var m=a(5838);function u(){let[e,r]=(0,o.useState)([]),[a,s]=(0,o.useState)([]),[c,n]=(0,o.useState)(!0),[i,u]=(0,o.useState)(null),[p,x]=(0,o.useState)(""),[h,g]=(0,o.useState)([]),[f,y]=(0,o.useState)([]),[b,j]=(0,o.useState)({min:0,max:5e3}),[v,N]=(0,o.useState)("featured"),[w,E]=(0,o.useState)(!1),[_,S]=(0,o.useState)({brands:!0,price:!0});l.W_G,l.Wqt,l.Wqt,l.pBr,l.TlQ,l.Vp6,l.Mu7,l.UIU,(0,o.useEffect)(()=>{(async()=>{try{n(!0),u(null);let[e,a]=await Promise.all([m.Ts.getAll(),m.rF.getAll()]);r(e);let t=a.map(r=>({id:r.id_marca,name:r.nombre,count:e.filter(e=>e.id_marca===r.id_marca).length}));if(y(t),e.length>0){let r=e.map(e=>e.precio),a=Math.ceil(Math.max(...r));j({min:0,max:a})}}catch(e){console.error("Error al cargar datos:",e),u("Error al cargar los productos. Por favor, intenta de nuevo m\xe1s tarde.")}finally{n(!1)}})()},[]),(0,o.useEffect)(()=>{if(!e.length)return;let r=[...e];switch(p&&(r=r.filter(e=>e.nombre.toLowerCase().includes(p.toLowerCase())||e.descripcion&&e.descripcion.toLowerCase().includes(p.toLowerCase()))),h.length>0&&(r=r.filter(e=>h.includes(e.id_marca))),r=r.filter(e=>e.precio>=b.min&&e.precio<=b.max),v){case"price-asc":r=[...r].sort((e,r)=>e.precio-r.precio);break;case"price-desc":r=[...r].sort((e,r)=>r.precio-e.precio);break;case"newest":break;case"discount":r=[...r].sort((e,r)=>{let a=e.precio_oferta?(e.precio-e.precio_oferta)/e.precio:0;return(r.precio_oferta?(r.precio-r.precio_oferta)/r.precio:0)-a})}s(r)},[e,p,h,b,v]);let C=e=>{g(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])},k=()=>{x(""),g([]),e.length>0?j({min:0,max:Math.ceil(Math.max(...e.map(e=>e.precio)))}):j({min:0,max:5e3}),N("featured")},A=e=>{S(r=>({...r,[e]:!r[e]}))};return(0,t.jsxs)("div",{className:"bg-gray-950 text-white min-h-screen",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 py-12",children:(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Cat\xe1logo de Productos"}),(0,t.jsx)("p",{className:"text-gray-300 max-w-2xl",children:"Explora nuestra selecci\xf3n de productos gaming de alta calidad. Filtra por marca, categor\xeda y precio para encontrar exactamente lo que buscas."})]})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,t.jsx)(l.KSO,{className:"text-gray-400"})}),(0,t.jsx)("input",{type:"text",value:p,onChange:e=>x(e.target.value),placeholder:"Buscar productos...",className:"w-full pl-10 pr-4 py-3 bg-gray-900 border border-gray-800 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>E(!0),className:"md:hidden px-4 py-3 bg-gray-900 border border-gray-800 rounded-lg flex items-center gap-2",children:[(0,t.jsx)(l.YsJ,{}),(0,t.jsx)("span",{children:"Filtros"})]}),(0,t.jsxs)("select",{value:v,onChange:e=>N(e.target.value),className:"px-4 py-3 bg-gray-900 border border-gray-800 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 appearance-none cursor-pointer",children:[(0,t.jsx)("option",{value:"featured",children:"Destacados"}),(0,t.jsx)("option",{value:"price-asc",children:"Precio: Menor a Mayor"}),(0,t.jsx)("option",{value:"price-desc",children:"Precio: Mayor a Menor"}),(0,t.jsx)("option",{value:"newest",children:"M\xe1s Recientes"}),(0,t.jsx)("option",{value:"discount",children:"Mayor Descuento"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,t.jsx)("div",{className:"hidden md:block w-64 flex-shrink-0",children:(0,t.jsxs)("div",{className:"bg-gray-900 rounded-xl p-6 sticky top-24",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Filtros"}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-3 cursor-pointer",onClick:()=>A("brands"),children:[(0,t.jsx)("h3",{className:"font-medium",children:"Marcas"}),(0,t.jsx)("span",{className:"text-gray-400",children:_.brands?"−":"+"})]}),_.brands&&(0,t.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:f.map(e=>(0,t.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:h.includes(e.id),onChange:()=>C(e.id),className:"form-checkbox h-4 w-4 text-red-500 rounded border-gray-700 bg-gray-800 focus:ring-0 focus:ring-offset-0"}),(0,t.jsx)("span",{className:"ml-2 text-sm",children:e.name}),(0,t.jsx)("span",{className:"ml-auto text-xs text-gray-500",children:e.count})]},e.id))})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-3 cursor-pointer",onClick:()=>A("price"),children:[(0,t.jsx)("h3",{className:"font-medium",children:"Precio"}),(0,t.jsx)("span",{className:"text-gray-400",children:_.price?"−":"+"})]}),_.price&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{className:"text-sm",children:["$",b.min]}),(0,t.jsxs)("span",{className:"text-sm",children:["$",b.max]})]}),(0,t.jsx)("input",{type:"range",min:"0",max:Math.max(5e3,...e.map(e=>e.precio)),value:b.max,onChange:e=>j(r=>({...r,max:parseInt(e.target.value)})),className:"w-full h-2 bg-gray-800 rounded-lg appearance-none cursor-pointer accent-red-500"})]})]}),(0,t.jsx)("button",{onClick:k,className:"w-full py-2 bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-lg transition-colors text-sm",children:"Limpiar Filtros"})]})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"mb-6 flex flex-wrap gap-2",children:[h.length>0&&(0,t.jsxs)("div",{className:"flex items-center text-sm bg-gray-800/80 py-1 px-3 rounded-full border border-gray-700",children:[(0,t.jsx)("span",{className:"mr-2",children:"Marcas:"}),(0,t.jsx)("span",{className:"font-medium",children:h.length})]}),(b.min>0||b.max<5e3)&&(0,t.jsxs)("div",{className:"flex items-center text-sm bg-gray-800/80 py-1 px-3 rounded-full border border-gray-700",children:[(0,t.jsx)("span",{className:"mr-2",children:"Precio:"}),(0,t.jsxs)("span",{className:"font-medium",children:["$",b.min," - $",b.max]})]}),p&&(0,t.jsxs)("div",{className:"flex items-center text-sm bg-gray-800/80 py-1 px-3 rounded-full border border-gray-700",children:[(0,t.jsx)("span",{className:"mr-2",children:"B\xfasqueda:"}),(0,t.jsx)("span",{className:"font-medium",children:p})]})]}),c?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-gray-800 border-t-red-500 rounded-full animate-spin"}),(0,t.jsx)("p",{className:"mt-4 text-gray-400",children:"Cargando productos..."})]}):i?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,t.jsx)("div",{className:"text-6xl text-red-500 mb-4",children:(0,t.jsx)(l.QCr,{})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Error al cargar productos"}),(0,t.jsx)("p",{className:"text-gray-400 max-w-md mb-6",children:i}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-lg transition-colors",children:"Reintentar"})]}):0===a.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,t.jsx)("div",{className:"text-6xl text-gray-700 mb-4",children:(0,t.jsx)(l.KSO,{})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"No se encontraron productos"}),(0,t.jsx)("p",{className:"text-gray-400 max-w-md mb-6",children:"No hay productos que coincidan con tus criterios de b\xfasqueda. Intenta cambiar los filtros o buscar con otros t\xe9rminos."}),(0,t.jsx)("button",{onClick:k,className:"px-6 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-lg transition-colors",children:"Limpiar filtros"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:["Mostrando ",a.length," de ",e.length," productos"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>(0,t.jsx)(d,{product:e},e.id_producto))})]})]})]})]})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[504,532,651,565,441,517,358],()=>r(9382)),_N_E=e.O()}]);